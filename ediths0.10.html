<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>действия и Edith</title>
    <link rel="stylesheet" href="style.css">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="expires" content="0">
</head>

<body>
    <main>
        <h1 class="pink">создание своих действий</h1>
        <h3>v 0.10</h3>
        <h2>коротко</h2>
        <a href="https://docs.google.com/spreadsheets/d/1ktXstvHsCjkmym_s3IjyecAlcgcj_3Qz_zjqoK4Dchg/edit?usp=sharing">Шаблон для создания своих действий</a>
        <br><br>
        <p>Для создания действий есть гугл-табличка, в которой можно ввести все нужные данные и на выход получить строку для игровой консоли.</p>
        <table>
            <tr>Что в шаблоне:
                    <br>
                    <img src="images/edith1.png" alt="">
                    <br><br>
            </tr>
            <tr>
                    Что оно значит:
                    <br>
                    <img src="images/edith2.png" alt="">
            </tr>
        </table>
        <h2>ого круто, подробнее?</h2>
        <p>Каждое действие состоит из шагов. Шаги называются Edith (в честь такой же системы из The Sims 1).
       </p>

       <p>Структура действия, Action:</p>
        <div class="code">
            class Action:  <br>
            &nbsp;&nbsp;&nbsp;var ediths = [] <br>
            &nbsp;&nbsp;&nbsp;var needs = [] <br>
            &nbsp;&nbsp;&nbsp;var furn = [] <br>
            &nbsp;&nbsp;&nbsp;var id = 0 <br>
            &nbsp;&nbsp;&nbsp;var status = "" 
        </div>
        <table>
            <tr>
                <td>ediths</td>
                <td>Список шагов, которые содержит это действие (см. далее)</td>
            </tr>
            <tr>
                <td>needs</td>
                <td>Список параметров, при критическом уровне которых человек обратится к этому действию</td>
            </tr>
            <tr>
                <td>furn</td>
                <td>Список типов мебели, которые нужны для выполнения этого действия</td>
            </tr>
            <tr>
                <td>id</td>
                <td>ID этого действия в игровом мире</td>
            </tr>
            <tr>
                <td>status</td>
                <td>Название действия, которое будет видно игроку (например, "упражняется на тренажере" или "читает книгу")</td>
            </tr>
            </table>
            <br>
       <p>Структура Edith:</p>
        <div class="code">
            class Edith: <br>
            &nbsp;&nbsp;&nbsp;var id = 0<br>
            &nbsp;&nbsp;&nbsp;var true_id = 0 <br>
            &nbsp;&nbsp;&nbsp;var false_id = 0<br>
            &nbsp;&nbsp;&nbsp;var rule = Rule.Null<br>
            &nbsp;&nbsp;&nbsp;var rule_value = "0"<br>
        </div>
        <table>
            <tr>
                <td>id</td>
                <td>Порядковый номер этого конкретного шага</td>
            </tr>
            <tr>
                <td>true_id</td>
                <td>Номер следующего шага, если rule выполнится успешно</td>
            </tr>
            <tr>
                <td>false_id</td>
                <td>Номер следующего шага, если rule выполнится не успешно</td>
            </tr>
            <tr>
                <td>rule</td>
                <td>Действие, которое нужно выполнить человеку на этом конкретном шаге</td>
            </tr>
            <tr>
                <td>rule_value</td>
                <td>Аргументы для выполнения действия (требуются не всегда)</td>
            </tr>
            </table>
            <br>
            <p>Возможные действия (Rule) в рамках Edith:</p>
            <table>
                    <tr>
                        <td><b>Rule</b></td>
                        <td><b>Аргументы</b></td>
                        <td><b>Описание</b></td>
                    </tr>
                <tr>
                    <td>Null</td>
                    <td><i>нет</i></td>
                    <td>Просто Null действие, на случай если что-то пойдет не так.
                        <br><br><b>Всегда успешный исход</b>
                    </td>
                </tr>
                <tr>
                    <td>Start</td>
                    <td><i>нет</i></td>
                    <td>Старт действия. В каждом действии является самым первым шагом, точкой входа.
                        <br><br><b>Всегда успешный исход</b>
                    </td>
                </tr>
                <tr>
                    <td>Finish</td>
                    <td><i>нет</i></td>
                    <td>Конец действия. В каждом действии является самым последним шагом.
                        <br><br><b>Всегда успешный исход, в качестве true_id и false_id указывается номер этого же шага</b>
                    </td>
                </tr>
                <tr>
                    <td>Wait</td>
                    <td>время_в_сек (float)</td>
                    <td>Подождать заданное количество секунд.
                        <br><br><b>Всегда успешный исход</b>
                    </td>
                </tr>
                <tr>
                    <td>RandomChance</td>
                    <td>вероятность (int, от 0 до 100)</td>
                    <td>Рандомный шанс выполнения следующего действия.
                        <br><br><b>Если рандомное число оказалось меньше указанной вероятности, происходит переход на true_id действие, иначе false_id действие</b>
                    </td>
                </tr>
                <tr>
                    <td>GoToObj</td>
                    <td>ID_типа_мебели (int)</td>
                    <td>Поиск нужного предмета мебели. Если такой найден, то человек идет до него и переходит на следующий шаг действия.
                        <br><br><b>Условие успешности:</b>
                        <br>Предмет с таким типом найден и не занят другим человеком
                        <br><b>Условие неудачи:</b>
                        <br>Предмета с таким типом нет
                    </td>
                </tr>
                <tr>
                    <td>GoToHuman</td>
                    <td>local_ID_человека (int)</td>
                    <td>Поиск человека по его ID. Если такой найден, то человек идет до него и переходит на следующий шаг действия.
                        <br><br><b>Условие успешности:</b>
                        <br>Человек с таким ID есть
                        <br><b>Условие неудачи:</b>
                        <br>Человекa с таким ID нет
                    </td>
                </tr>
                <tr>
                    <td>StopHuman</td>
                    <td>local_ID_человека (int)</td>
                    <td>Остановить человека по его ID. При успешном выполнении человек с заданным ID бросает все свои действия и идет навстречу человеку, от которого пришло это правило.
                        <br><br><b>Условие успешности:</b>
                        <br>Человек с таким ID есть
                        <br><b>Условие неудачи:</b>
                        <br>Человекa с таким ID нет
                    </td>
                </tr>
                <tr>
                    <td>ParamLessThan</td>
                    <td>название_параметра (string), уровень_параметра (int)
                        <br><br>например, "<i>hunger 50</i>"
                    </td>
                    <td>
                        <br><br><b>Условие успешности:</b>
                        <br>У человека уровень указанного параметр ниже, чем уровень, переданный в аргументах
                        <br><b>Условие неудачи:</b>
                        <br>У человека уровень указанного параметр выше или равен, чем уровень, переданный в аргументах
                    </td>
                </tr>
                <tr>
                    <td>ParamMoreThan</td>
                    <td>название_параметра (string), уровень_параметра (int)
                        <br><br>например, "<i>hunger 50</i>"
                    </td>
                    <td>
                        <br><br><b>Условие успешности:</b>
                        <br>У человека уровень указанного параметр выше или равен, чем уровень, переданный в аргументах
                        <br><b>Условие неудачи:</b>
                        <br>У человека уровень указанного параметр ниже, чем уровень, переданный в аргументах
                    </td>
                </tr>
                <tr>
                    <td>ParamSet</td>
                    <td>название_параметра (string), уровень_параметра (int)
                        <br><br>например, "<i>hunger 50</i>"
                    </td>
                    <td>
                        Присвоить человеку новый уровень указанного параметра
                        <br><br><b>Всегда успешный исход</b>
                    </td>
                </tr>
                <tr>
                    <td>ParamChange</td>
                    <td>название_параметра (string), уровень_параметра (int)
                        <br><br>например, "<i>hunger -15</i>"
                    </td>
                    <td>
                        Изменить человеку указанный параметр на указанный уровень. Также принимает отрицательные числа.
                        <br><br><b>Всегда успешный исход</b>
                    </td>
                </tr>
                <tr>
                    <td>PoseChange</td>
                    <td>название_позы (string)
                        <br><br>всегда либо "<i>standing</i>", либо "<i>sitting</i>", либо "<i>ding</i>".
                    </td>
                    <td>
                        Изменить позу внешнего вида человека.
                        <br><br><b>Всегда успешный исход</b>
                    </td>
                </tr>
                <tr>
                    <td>GreetRandom</td>
                    <td><i>нет</i>
                    </td>
                    <td>
                        Стать знакомыми с рандомным человеком. В случае успеха у человека и его собеседника появится новое отношение типа Acquaintance.
                        <br><br><b>Условие успешности:</b>
                        <br>Произошло знакомство
                        <br><b>Условие неудачи:</b>
                        <br>Человек единственный во всем мире
                    </td>
                </tr>
                <tr>
                    <td>ExtractInfo</td>
                    <td>
                        local_ID_человека
                    </td>
                    <td>
                        Перенять от собеседника новое мнение
                        <br><br><b>Всегда успешный исход</b>

                        <br><br><a href="#SetEdithVariable">Также см. SetEdithVariable</a>, в качестве параметра можно передать название переменной вида <i>$1</i>
                    </td>
                </tr>
                <tr>
                    <td>OpinionExchange</td>
                    <td>
                        local_ID_человека
                    </td>
                    <td>
                        Обменяться с собеседником мнением на какую-то тему. Если собеседник обладает авторитетом или состоит в авторитетной системе, человек переймет себе его мнение; иначе человек переймет строго противоположное мнение.
                        <br><br><b>Условие успешности:</b>
                        <br>Собеседник авторитетный, мнение перенято
                        <br><b>Условие неудачи:</b>
                        <br>Собеседник не авторитетный, принятое противоположное от его мнение
                        
                        <br><br><a href="#SetEdithVariable">Также см. SetEdithVariable</a>, в качестве параметра можно передать название переменной вида <i>$1</i>
                    </td>
                </tr>
                <tr>
                    <td>NextAction</td>
                    <td>
                        action_ID (int)
                    </td>
                    <td>
                        Завершить это действие (Action) и перейти сразу к другому.
                        <br><br><b>Всегда успешный исход</b>
                    </td>
                </tr>
                <tr>
                    <td>Cry</td>
                    <td>время_в_сек (float)</td>
                    <td>
                        Используется, если невозможно выполнить действие (Action), когда например, нет нужного предмета мебели и т.п. Должно быть добавлено в Action вручную. Человек какое-то время "ноет" и восполняет потребность, с которой был связан Action на минимально возможный уровень чуть больше критического, чтобы не циклиться на этой потребности некоторое времяю
                        <br><br><b>Всегда успешный исход</b>
                    </td>
                </tr>
                <tr>
                    <td id="SetEdithVariable">SetEdithVariable</td>
                    <td>variable (string), value (int или string)</td>
                    <td>Некоторые rule_value могут меняться в одном действии в зависимости от места выполнения. Например, внутри правил ExtractInfo или OpinionExchange в разное время может использоваться разный id человека в качестве параметра.
                        <br><br> Поэтому для SetEdithVariable в rule_value искомое (variable) заменяется на новое значение (value). Таким образом может, например, использоваться один и тот же id человека в нескольких шагах.
                        <br> <br> Пример использования аргументов: <br><br>
                        <div class="code">$1 52</div>
                        $1 это переменная, 52 - новое ее значение
                        <br><br><b>Всегда успешный исход</b>
                    </td>
                </tr>
            </table>
    </main>
</body>

</html>